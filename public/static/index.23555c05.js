import{r as e,o as t,c as s,a as r,b as a,D as o,m as n,d as l,e as d,F as i}from"./vendor.f36a1d97.js";const c={};c.render=function(r,a){const o=e("router-view");return t(),s(o)};let h;const u={},m=function(e,t){if(!t)return e();if(void 0===h){const e=document.createElement("link").relList;h=e&&e.supports&&e.supports("modulepreload")?"modulepreload":"preload"}return Promise.all(t.map((e=>{if(e in u)return;u[e]=!0;const t=e.endsWith(".css"),s=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":h,t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise(((e,t)=>{r.addEventListener("load",e),r.addEventListener("error",t)})):void 0}))).then((()=>e()))},p=r({history:a(),routes:[{path:"/",component:()=>m((()=>import("./Index.b0dd3c3b.js")),["/static/Index.b0dd3c3b.js","/static/vendor.f36a1d97.js"])},{path:"/item/:pathMatch(.*)*",name:"readMarkdown",component:()=>m((()=>import("./Index.b0dd3c3b.js")),["/static/Index.b0dd3c3b.js","/static/vendor.f36a1d97.js"])}]});p.beforeEach((()=>{console.log("路由拦截")}));const f=o.create({baseURL:"/",timeout:6e3});f.interceptors.request.use((e=>e),(e=>Promise.reject(e))),f.interceptors.response.use((e=>{const{headers:t,data:s,status:r}=e;return"200"==r||s.success||"success"==s.result?s:Promise.reject()}),(e=>Promise.reject(e)));let v={send:function(e){return f({url:"/api/markdown/files",data:e,method:"GET"})}},k={send:function(e){return f({url:"/api/markdown/read",data:e,method:"POST"})}},w={send:function(e){return f({url:"/api/search",data:e,method:"POST"})}},F={getMarkdownFiles:v,readMarkdown:k,searchRequest:w};const g={name:"ElMarkdownDisplay",data:()=>({allFiles:[],searchedFiles:[],items:[],filterText:"",defaultProps:{children:"children",label:"name"},html:""}),props:{},watch:{$router:{handler(e,t){console.log("val",e),console.log("oldval",t)}},filterText(e){e?this.search(e):this.items=this.allFiles}},mounted(){let e=this;this.getFiles(),this.readFile(),this.$watch((()=>this.$route.params),((t,s)=>{e.readFile()}))},methods:{search:function(e){let t=this;F.searchRequest.send({query:e}).then((e=>{console.log("searchedFiles",e),2e3==e.state&&(t.searchedFiles={name:"Root",parent:"docs",path:"docs",relative:"",root:"docs",children:[]},e.data.hits.forEach((function(e){t.searchedFiles.children.push({name:e.id,parent:"docs",path:"docs/"+e.id,relative:e.id,root:"docs",children:[]})})),t.items=t.searchedFiles)})).catch((e=>{console.log(e)}))},getFiles:function(){let e=this;F.getMarkdownFiles.send().then((t=>{2e3==t.state&&(e.allFiles=t.data,e.items=t.data)})).catch((e=>{console.log(e)}))},readFile:function(){let e=this;var t=this.$route.params.pathMatch;if(void 0!==t){var s=t;if(t instanceof Array)s=t.join("/");F.readMarkdown.send({filepath:s}).then((t=>{2e3==t.state&&(e.html=n(t.data))})).catch((e=>{console.log(e)}))}else console.log("没进入"),e.html='<div class="welcome"><p>欢迎使用markdown网页浏览工具</p></div>'},handleNodeClick(e){var t=e.relative;0!=(t=t.replace(/\\/g,"/")).indexOf("\\")&&0!=t.indexOf("/")||(t=t.substr(1)),t.indexOf(".md")>-1&&this.$router.push({path:"/item/"+t})},filterNode:(e,t)=>!e||-1!==t.path.indexOf(e)}},E={class:"markdown-display"},b=l("div",{class:"markdown-header"},null,-1),x={class:"markdown-content"},P={class:"markdown-side"},T={class:"markdown-main",id:"write"};g.render=function(r,a,o,n,d,i){const c=e("el-input"),h=e("el-tree");return t(),s("div",E,[b,l("div",x,[l("div",P,[l(c,{placeholder:"输入关键字进行查询",modelValue:d.filterText,"onUpdate:modelValue":a[1]||(a[1]=e=>d.filterText=e),clearabl:""},null,8,["modelValue"]),l(h,{ref:"tree",data:d.items.children,props:d.defaultProps,onNodeClick:i.handleNodeClick,"filter-node-method":i.filterNode},null,8,["data","props","onNodeClick","filter-node-method"])]),l("div",T,[l("div",{innerHTML:d.html,class:"markdown-body"},null,8,["innerHTML"])])])])};const M=d(c);M.use(i,{size:"small",zIndex:3e3});[g].forEach((e=>{M.component(e.name,e)})),M.use(p),M.mount("#app");
